<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="output"></div>
    <div id="calendar-container">
    <div id="calendar-header" style="text-align:center; margin-bottom:10px;">
        <button onclick="changeMonth(-1)">◀️ 이전</button>
        <span id="currentMonthYear" style="margin: 0 20px; font-weight: bold;"></span>
        <button onclick="changeMonth(1)">다음 ▶️</button>
    </div>
    <div id="output"></div>
    </div>

    <script>
        // 전역 변수로 현재 연도와 월 관리
        let currentDate = new Date();

        function calendar(year, month) {
            // 기본값: 현재 날짜 기준
            const today = new Date();
            year = year ?? today.getFullYear();
            month = month ?? today.getMonth();

            // 날짜 계산
            const lastDate = new Date(year, month + 1, 0).getDate(); // 이달 마지막 일
            const firstDayOfWeek = new Date(year, month, 1).getDay(); // 이달 1일의 요일

            // 배열 초기화
            const arr = Array.from(Array(6), () => new Array(7).fill(''));

            // 날짜 채우기
            let day = 1;
            for (let i = 0; i < 6; i++) {
                for (let j = 0; j < 7; j++) {
                    if (i === 0 && j < firstDayOfWeek) continue;
                    if (day > lastDate) break;
                    arr[i][j] = day++;
                }
            }

            // 화면에 출력
            display(arr, year, month);
        }

        function display(arr, year, month) {
            const output = document.getElementById('output');
            const week = ['SUN','MON','TUE','WED','THU','FRI','SAT'];
            let result = '<table border="1" cellspacing="0" cellpadding="10">';

            // 헤더
            result += '<tr>';
            for (let i = 0; i < week.length; i++) {
                result += `<th>${week[i]}</th>`;
            }
            result += '</tr>';

            // 날짜
            for (let i = 0; i < arr.length; i++) {
                result += '<tr>';
                for (let j = 0; j < arr[i].length; j++) {
                    result += `<td>${arr[i][j] || ''}</td>`;
                }
                result += '</tr>';
            }

            result += '</table>';
            output.innerHTML = result;

            // 상단 연/월 표시
            const label = document.getElementById('currentMonthYear');
            label.textContent = `${year}년 ${month + 1}월`;

            // 현재 날짜 갱신
            currentDate = new Date(year, month);
        }

        function changeMonth(delta) {
            const newMonth = currentDate.getMonth() + delta;
            const newDate = new Date(currentDate.getFullYear(), newMonth, 1);
            calendar(newDate.getFullYear(), newDate.getMonth());
        }

        // 최초 실행
        calendar(currentDate.getFullYear(), currentDate.getMonth());
    </script>

</body>
</html>