<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장바구니 구현</title>
    <style>
        body{
            font-family: sans-serif;
            margin: 30px;
            background-color: #cbcbce;
        }
        h2{
            text-align: center;
            margin-bottom: 20px;
            /* color: #ffffff; */
        }
        table{
            width: 700px;
            margin: 0 auto;
            border-collapse: collapse;
            background-color: #ffffff;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        th, td{
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        th{
            background-color: #4caf50;
            color: #ffffff;
        }
        button{
            margin: 5px;
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            /* font-size: 200%; */
        }
        .plus{
            background-color: #4caf50;
            color: #ffffff;
        }
        .minus{
            background-color: #f39c12;
            color: #ffffff;
        }
        .remove{
            background-color: #e74c3c;
            color: #ffffff;
        }
        #total{
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <!-- html -->
    <h2>장바구니</h2>
    <table id="cartTable">
        <thead>
            <tr>
            <th>상품명</th>
            <th>가격</th>
            <th>수량</th>
            <th>합계</th>
            <th>조작</th>
            </tr>
        </thead>
        <tbody id="cartBody"></tbody>
    </table>
    <div id="total"></div>

    <!-- javascript -->
    <script>
        // 장바구니 구현 데이터
        let cart = [
            {id:1, name:'노트북', price:1000000, quantity: 1},
            {id:2, name:'마우스', price:20000, quantity: 2},
            {id:3, name:'키보드', price:50000, quantity: 1},
        ];

        // 장바구니 cartBody에 들어가는 table을 구현
        // function renderCart(){}로 작성
        function renderCart(){
            let cartBody = document.getElementById('cartBody');
            let result = '';
            
            let divTotal = document.getElementById('total');
            let divTotal01 = 0;
            // cart배열 오브젝트의 각 항목을 테이블의 <tr>~</tr>에 넣음
            for(let i=0; i<cart.length; i++){
                let sum = cart[i].quantity;
                let total = (cart[i].price * cart[i].quantity).toLocaleString('ko-kr');
                
                // i=0 일때 첫 번째 버튼 클릭. index 번호를 실어준다.
                // function increase(0) <- 매개면수 함수
                // onclick() 버튼을 클릭하는 사건이 일어나면 
                // increase(0) 함수로 가서 안에 실행문을 실행해라
                result += `
                <tr>
                    <td>${cart[i].name}</td>
                    <td>${cart[i].price.toLocaleString('ko-kr')}</td>
                    <td>${sum}</td>
                    <td>${total}</td>
                    <td>
                        <button class="plus" onclick="increase(${i})" type="button">+</button>
                        <button class="minus" onclick="decrease(${i})" type="button">-</button>
                        <button class="remove" onclick="remove(${i})" type="button">x</button>
                    </td>
                    </tr>
                    `;

                    total += divTotal01;
                    divTotal.innerHTML = `총 금액 : ${divTotal01}원`;
                    }
                cartBody.innerHTML = result;

        }
        // 호출
        renderCart();
        
        // plus 버튼 기능
        // 매개변수를 지정한 함수는 반드시 함수 작성시 매개변수 지정해야함
        // 함수의 매개변수 이름은 개발자가 작명한다
        // indexNum = for에서의 i와 같음
        function increase(indexNum){
            //  + 버튼을 클릭 할 때마다 수량이 1씩 증가
            // 수량의 증가는 10이 되면 더이상 증가불가
            if(cart[indexNum].quantity < 10){
                cart[indexNum].quantity++;
            }else{
                alert('수량은 10개 까지만 가능합니다.');
            }
            renderCart();
        }
        // minus 버튼 기능
        function decrease(indexNum){
            //  - 버튼을 클릭 할 때마다 수량이 1씩 감소
            // 수량의 감소는 1이 되면 더이상 감소불가
            if(cart[indexNum].quantity > 1){
                cart[indexNum].quantity--;
            }else{
                alert('수량은 최소 1개 이상이어야 합니다.');
            }
            renderCart();
        }
        // remove 버튼 기능
        // 배열이름.splice(시작할 인덱스 번호, 제거할 요소의 개수)
        // 메모리의 중요성 -> 메모리 데이터가 쌓이면 속도가 느려짐
        // 코드를 짜서 실행 -> 연산 -> 메모리의 제어장치로 이동 -> splice() -> 내장함수 -> 불러와서 사용
        function remove(indexNum){
            cart.splice(indexNum, 1);
            renderCart();
        }

        // 총 금액
        // let totalSum = 0;
        // for(i=0; i<cart.length; i++){
        //     total
        // }
    </script>
</body>
</html>